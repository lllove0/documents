Angular 应用架构最佳实践建议===========================为什么要提出命名约定？---------------------------------在现在的 Angular 代码里面，我们可能需要处理几个问题-  对不同使用类型的js文件命名相同是很常见的事情，一个service和一个filter使用相同的命名。举个例子，我们在IDE里面编辑这两个文件的时候，我们就很难区分哪个是哪个。将文件使用类型加入到命名规范中，就可解决此问题。- 目前有利用文件扩展或者命名规范等多种方式来组织我们的代码，比如单元测试，我们可以叫 *_test.js, *.spec.js或者 test/*.js，每个人写法个不一样。而使用一种单一的写法，更有助于团队的构建工具统一。建议的代码目录结构示例-------------------------### Recursive hierarchical structure (递进式的目录结构)我们提出一个递进式的目录结构，每个目录结构应该包含其模块定义文件（app.js），控制器定义文件（app-controller.js），单元测试文件（app-controller_test.js），HTML视图文件（index.html 或者 app.html）以及其他样式文件（app.css），而其他的比如directives, filters, services, protos, e2e tests，应单独放到他们的目录中。### Components and Sub-sections我们将应用下面的元素分为：要么是在`components`目录下面的组件（在应用中可重复使用的元素），要么是自己有意义的命名目录，通常这些目录是为了呈现应用内部代码结构或者是应用的内部路由等，我们可以叫这些目录为`section`（子栏目）。### Components- 一个组件一般包括：directives, services, filters 和其他相关文件。- 而通用文件比如 images, models, utility文件等可以存放在当前components目录下（components/lib/），也可以将其存放在外面目录。- 组件目录可以有子组件，子组件的存放方式与组件一样。- 当然，组件目录也可以包含模块的定义（具体查看下面的模块定义部分）。### Sub-sections- 在子栏目（或者子栏目下面的子栏目）应该只包含模板文件（.html, .css），控制器和模块定义文件。- 我们不推荐对第二级的子section使用同一个模板（section应该包含模板、控制器及模块的定义），而应该用目录结构来体现UI元素的线性结构。- 对于一个简单的应用，我们只需要一个controller，不需要其他子section目录，其他的都可以直接在顶级目录直接定义。- 子栏目可以有他们自己的模块，当然，这个具体得根据他们自身的代码复杂度来做权衡。### Module definitions- 通常，`angular.module('foo')`只被调用一次，其他模块和文件可以依赖它，但不应该修改它- 可以在主模块文件中定义模块，或者子目录或部件，取决于应用的需求。### 命名约定>我们遵循谷歌官方的JavaScript代码规范指南中的命名规范，并在此基础上进行一些补充:- 每个文件名应该描述清楚其目的，包括这里没包含的组件或者子栏目的信息，当然，还应该包含他的具体类型。举个栗子，日期选择器应该在`components/datepicker/datepicker-directive.js`目录。- Controller, directives, services, filters应该在名字中包含controller, directive, service, filter。- Controllers，Directives，Services 和 Filters 的文件名称应该包含 controller, directive, service 和 filter- 文件名要小写，遵循现有的JS代码规范，html和css文件也应该小写。- 单元测试文件应该已`_test.js`作为结尾，比如`foo-controller_test.js`，`bar-directive_test.js`。- 我们建议（不是必须遵循的），局部模板的文件命名以`html`结尾会比以`ng`命名要好。（这是因为在实际开发angular 应用中，大部分的模板都是局部的）### Example**非常简单的应用程序示例**> 只包含一个directive和一个service的简单应用示例```sampleapp/         	存放客户端应用和单元测试等文件	app.css	app.js	app-controller.js	app-controller_test.js	components/		foo/         模块文件存放在这边，比如"foo"模块			foo.js     "foo"模块文件            foo-directive.js            foo-directive_test.js            foo-service.js            foo-service_test.js   index.htmle2e-tests/                e2e 测试用例sampleapp-backend/        后端部分，与其他同级目录backend/ and sampleapp/...  可选项目目录```> 或者，directive和service之间是没有关联的话，我们应该:```sampleapp/	app.css	app.js    app-controller.js    app-controller_test.js    components/		bar/                          "bar" describes what the service does			bar.js		    bar-service.js		    bar-service_test.js		foo/                         "foo" describes what the directive does		    foo.js		    foo-directive.js		    foo-directive_test.js	index.html```我们推荐使用上面的目录结构（当然，不是强制规定），你也可以根据自身需求进行定制（比如，将 directives 和 services 放到 sampleapp 目录下，而不是将其放到对应的 components 目录下），我们目标是提供一个可实施的和可自动部署的方案。当然，推荐的最佳实践也代表着：我们会针对推荐的代码结构进行构建工具的选择和脚本的编写维护。**更为复杂的应用实例**>就接下来来看看一个更为复杂的代码示例，一个订票应用。这个应用包含了用户和管理员登录模块，这里的用户的部分UI和路由是可以共用，我们希望可以将共用文件进行分离，那么我们可以酱紫组织我们的结构：```sampleapp/	app.css	app.js             顶层配置文件，以及路由定义	app-controller.js	app-controller_test.js	components/		adminlogin/			adminlogin.css                只用于该组件的样式			adminlogin.js                 可选的模块定义			adminlogin-directive.js			adminlogin-directive_test.js	    private-export-filter/			private-export-filter.js            private-export-filter_test.js		userlogin/			somefilter.js			somefilter_test.js			userlogin.js			userlogin.css			userlogin.html			userlogin-directive.js			userlogin-directive_test.js			userlogin-service.js			userlogin-service_test.js	index.html	subsection1/		subsection1.js		subsection1-controller.js		subsection1-controller_test.js        subsection1_test.js        subsection1-1/			subsection1-1.css			subsection1-1.html            subsection1-1.js            subsection1-1-controller.js			subsection1-1-controller_test.js	        subsection1-2/	subsection2/		subsection2.css		subsection2.html		subsection2.js		subsection2-controller.js		subsection2-controller_test.js	subsection3/		subsection3-1/		etc...```**通用的 Phonecat 应用结构**> 运用到实际我们项目开发中，这里我们展示一个我们的`angular-phonecat`的应用（细节省略）```app/	css/		app.css		bootstrap.css	img/		phones/			nexus-s.0.jpg			nexus-s.1.jpg			nexus-s.2.jpg			nexus-s.3.jpg		glyphicons-halflings-white.png		glyphicons-halflings.png	js/		app.js		controllers.js		directives.js		filters.js		services.js	partials/		phone-detail.html		phone-list.html	phones/		nexus-s.json		phones.json		index-async.html		index.htmltest/	e2e/		runner.html		scenarios.js	unit/		controllersSpec.js		directivesSpec.js		filtersSpec.js		servicesSpec.js```> 对应的angular-phonecat应用也要相应调整，调整后的结构：```app/	app.css                                        was app/css/app.css	app.js                                        was app/js/app.js	bootstrap.css                                was app/css/bootstrap.css	components/        checkmark-filter/           checkmark-filter.js                was app/js/filters.js           checkmark-filter_test.js                was test/unit/filtersSpec.js		phonecat/           phonecat.js                        new file to contain the module routing		   phonecat-service.js                was app/js/services.js           phonecat-service_test.js                was test/unit/servicesSpec.js		detail/		  phone-detail.html                        was app/partials/phone-detail.html		  phone-detail-controller.js        was app/js/controllers.js		  phone-detail-controller_test.js        was test/unit/controllersSpec.js	index.html                                was app/index.html	index-async.html                                was app/index-async.html	list/	  phone-list.html                        was app/partials/phone-list.html	  phone-list-controller.js                was app/js/controllers.js	  phone-list-controller_test.js        was test/unit/controllersSpec.jsapp-phonedata/                                outside the scope of the app, just data.	img/                                        might also be located inside components/		phones/			nexus-s.0.jpg			nexus-s.1.jpg			nexus-s.2.jpg			nexus-s.3.jpg	glyphicons-halflings-white.png	glyphicons-halflings.png		phones/			nexus-s.json			phones.jsone2e/	runner.html	scenarios.js```**谷歌项目具体的示例**> 注意：这部分只跟在谷歌中工作的开发人员有关。这里有很多的定制化的使用场景，将来我们将会发布一个更为通用的版本。```app/                                        was "client/app". this is the project name	about/		about-controller.js         was "client/app/js/controllers/about.js"		about-controller_test.js        was "test/unit/controllers/about_test.js"		about.html                         was "client/app/html/about.html"		about.js                         was "client/app/js/services/module.js"	app.css                                 was "client/app/css/app.css"	app.js                                 was "js/app.js"	app-controller.js                 was "js/controllers/app.js"	compiledindex.html                was "client/app/compiledindex.html"	components/		ransom-filter/			ransomnote-filter.js        was "client/app/js/filters/ransomnote.js"			ransomnote-filter_test.js        was "test/unit/filters/ransomnote.js"		pane/			pane.js                     new file to contain the module routing			pane-directive.js          was "client/app/js/directives/pane.js"			pane-directive_test.js     was "test/unit/directives/pane.js"			request/				request-service.js      was "client/app/js/services/request.js"				request-service_test.js   new file with tests for the request service			versions/				versions-service.js      was "client/app/js/services/versions.js"				versions-service_test.js	genjsdeps.sh	index.html                                was "client/app/index.html"	mainpage/		mainpage.html               was "client/app/html/home.html"		mainpage.js                 was "client/app/js/directives/module.js"		mainpage-controller.js      was "client/app/js/controllers/home.js"		mainpage-controller_test.js was "test/unit/controllers/home_test.js"	README	servecompiled.sh                was "client/app/servecompiled.sh"e2e/	runner.html	scenarios.jsproto/```**参考阅读**- [Angular Best Practice for App Structure](https://docs.google.com/document/d/1XXMvReO8-Awi1EZXAXS4PzDzdNvV6pGcuaF4Q9821Es/pub)- [Angular 2 Style Guide](https://mgechev.github.io/angular2-style-guide/)- [Google JavaScript Style Guide](https://google.github.io/styleguide/javascriptguide.xml)